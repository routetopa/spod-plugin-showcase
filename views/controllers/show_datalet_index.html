{$datalet_definition_import}

<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script type="text/javascript">

    var page = 0;

    $( window ).on('resize', function(){
        $(window).scrollTop($(window).height()*page);
    });

    $( document ).ready(function() {

        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }

        /*var s = skrollr.init({
            forceHeight:true
        });*/

        $("#dragme").draggable({
            containment: "parent",
            axis: "x",
            drag: function( event, ui ) {
                $("#sx_view").width(ui.position.left);
            }
        });

        $(".nav").on('click', function (e) {

            $(".nav").removeClass('selected');
            $(e.currentTarget).addClass('selected');

            let page_one = function () {
                $('html, body').animate({
                    scrollTop: 0
                }, 1000);

                page = 0;
            };

            let page_two = function ()
            {
                $("#sx_view").width(0);
                $("#dragme").css('left', 0);

                $('html, body').animate({
                    scrollTop: $(window).height()
                }, 1000);

                let width = (0.50*$('#sx_view').parent().width());

                $("#sx_view").animate({
                    width : width
                }, 2500);

                $("#dragme").animate({
                    left : '50%'
                }, 2500);

                page = 1;

            };

            let page_three = function () {
                $('html, body').animate({
                    scrollTop: $(window).height()*2
                }, 1000);

                page = 2;
            };

            switch (e.currentTarget.getAttribute('nav-menu'))
            {
                case "1" : page_one(); break;
                case "2" : page_two(); break;
                case "3" : page_three(); break;
            }

        });

        /*let get_url = window.location;
        let base_url = get_url.protocol + "//" + get_url.host + "/" ;*/

        $('#div2').hover(function() {
            $('#page_three').css("background-image", "url('/ow_static/plugins/showcase/images/commonroomaug2013-1.jpg')");
        });

        $('#div3').hover(function() {
            $('#page_three').css("background-image", "url('/ow_static/plugins/showcase/images/the-earth-isnt-flat-phlogiston-doesnt-exist-small.jpg')");
        });

        $('#div4').hover(function() {
            $('#page_three').css("background-image", "url('/ow_static/plugins/showcase/images/light-graph-background-gradient.jpg')");
        });

    });

</script>

<!--<div class="site_tour"></div>-->

<div class="page_navigator">
    <div class="page_navigator_container">
        <div nav-menu="1" class="nav selected"></div>
        <div nav-menu="2" class="nav"></div>
        <div nav-menu="3" class="nav"></div>
    </div>
</div>

<div class="page_one agora_left_comment">

    <svg id="demo" viewBox="0 0 1600 600" preserveAspectRatio="xMidYMid slice">
        <defs>
            <linearGradient id="grad1" x1="0" y1="0" x2="1" y2="0" color-interpolation="sRGB">
                <stop id="stop1a" offset="0%" stop-color="#12a3b4"></stop>
                <stop id="stop1b" offset="100%" stop-color="#ff509e"></stop>
            </linearGradient>
            <linearGradient id="grad2" x1="0" y1="0" x2="1" y2="0" color-interpolation="sRGB">
                <stop id="stop2a" offset="0%" stop-color="#e3bc13"></stop>
                <stop id="stop2b" offset="100%" stop-color="#00a78f"></stop>
            </linearGradient>
        </defs>
        <rect id="rect1" x="0" y="0" width="1600" height="600" stroke="none" fill="url(#grad1)"></rect>
        <rect id="rect2" x="0" y="0" width="1600" height="600" stroke="none" fill="url(#grad2)"></rect>
    </svg>

    <div id="" class="agora_fullsize_datalet" datalet-id="">
        {$html_datalet}
    </div>
    
    <div class="mobile_image">
        <img src="{$ur_share_img}">
    </div>

    <div class="ow_avatar" title='{$avatar["title"]}'>
        <a class="" href='{$avatar["url"]}'>
            <img src='{$avatar["src"]}'>
        </a>
    </div>

    <div class="datalet_info">

        <div class="datalet_context">
            {if $context["context"] == "agora"}
                {text key="spodshowcase+datalet_from_agora_message"
                component={$datalet->component}
                user_url={$avatar["url"]}
                user_title={$avatar["title"]}
                context={$context["context"]}
                context_id={$context["id"]}
                context_subject={$context["subject"]}
                dataset={$dataset}
                context_views={$context["views"]}
                context_comments={$context["comments"]}
                context_opendata={$context["opendata"]}
                }
            {/if}
            {if $context["context"] == "newsfeed"}
                {text key="spodshowcase+datalet_from_newsfeed_message"
                component={$datalet->component}
                user_url={$avatar["url"]}
                user_title={$avatar["title"]}
                context={$context["context"]}
                dataset={$dataset}
                }
            {/if}
        </div>

        <div class="project_info">
            {text key="spodshowcase+project_info"}
        </div>

    </div>

    <div class="project_grant">
        <div class="eu_flag"></div>
        <div class="project_grant_text">{text key="spodshowcase+project_grant"}</div>
    </div>

</div>

<div id="page_two">

    <div id="sx_view" class="sx_view">
        <div class="sx_container">

            <div class="comparator_image_container">
                <img src="/ow_static/plugins/showcase/images/visual.jpg" style="vertical-align: middle">
            </div>

            <div class="floating_text" style="left: 5%; top: 25%; width: 445px">
                {text key="spodshowcase+page_two_message_1"}
            </div>

            <div class="floating_text speech_balloon" style="left: 69%;top: 16%;width: 325px;">
                {text key="spodshowcase+page_two_message_2"}
            </div>

            <div class="floating_text speech_balloon" style="left: 53%;top: 40%;width: 300px;">
                {text key="spodshowcase+page_two_message_3"}
            </div>

            <div class="floating_text speech_balloon" style="left: 61%;top: 68%;width: 400px;">
                {text key="spodshowcase+page_two_message_4"}
            </div>

        </div>
    </div>

    <div class="dx_view">
        <div class="dx_container">

            <div class="comparator_image_container" >
                <img src="/ow_static/plugins/showcase/images/data.png" style="vertical-align: middle">
            </div>

        </div>
    </div>

    <div id="dragme">
        <span></span>
    </div>


</div>


<div id="page_three">

    <div class="floating_text speech_balloon_reverse" style="left: 5%; top: 49%; width: 400px;">
        {text key="spodshowcase+page_three_message_1"}
    </div>

    <div style="" id="div1">
        <div id="div2">
            {literal}
            <areachart-datalet data-url="http://ckan.routetopa.eu/api/3/action/datastore_search?resource_id=a54cf241-57a6-46c5-ba45-3a67fd1ff422&amp;limit=99999" selectedfields="[{&quot;field&quot;:&quot;XAxis&quot;,&quot;value&quot;:&quot;COLLEGIO PROVINCIALE&quot;,&quot;index&quot;:4},{&quot;field&quot;:&quot;NumericYAxis&quot;,&quot;value&quot;:&quot;ELETTORI FEMMINE&quot;,&quot;index&quot;:1},{&quot;field&quot;:&quot;NumericYAxis&quot;,&quot;value&quot;:&quot;ELETTORI MASCHI&quot;,&quot;index&quot;:2},null,{&quot;field&quot;:&quot;Categories&quot;,&quot;value&quot;:&quot;CIRCOSCRIZIONE&quot;,&quot;index&quot;:3}]" filters="[]" aggregators="[]" orders="[]" x-axis-label="" y-axis-label="" suffix="" legend="topRight" data-labels="true" stack="false" theme="themeBase" data="[{&quot;name&quot;:&quot;COLLEGIO PROVINCIALE&quot;,&quot;data&quot;:[7,7,2,7,11,7,11,6,10,2,1,2,3,6,3,3,6,3,3,1,3,3,3,2,3,2,4,2,2,6,2,2,1,11,1,2,2,12,12,2,2,1,1,1,6,5,12,5,5,5,5,5,9,5,9,5,4,5,1,7,5,5,5,5,7,7,7,4,1,6,6,6,3,10,8,7,10,8,8,7,8,10,8,10,8,8,8,10,8,10,8,8,8,10,10,8,10,7,7,4,7,4,4,4,9,7,9,9,4,9,10,11,4,11,4,10,4,10,11,11,4,11,4,11,11,11,10,11,11,9,11,9,11,12,12,9,12,9,12,12,6,9,12,12,9,12,12,12,12,9,12,9,6,6,6,6,6,3,6,4,1,5,5,1,5,2,3,3,1,1,3,1,7,10,12,11,10,7,7]},{&quot;name&quot;:&quot;ELETTORI FEMMINE&quot;,&quot;data&quot;:[326,369,280,362,445,304,475,463,405,437,448,254,536,433,484,430,484,336,265,409,303,290,380,363,291,346,354,476,398,512,336,369,328,321,469,381,350,435,496,295,344,353,353,390,449,396,415,257,380,490,351,296,280,388,336,417,368,384,465,469,469,478,306,320,306,370,487,486,375,457,510,459,381,432,487,440,494,284,300,404,484,294,458,486,457,376,329,537,319,556,338,370,453,532,510,435,498,339,403,402,488,379,520,375,345,384,282,269,327,321,405,494,357,454,358,523,410,439,281,369,279,340,392,405,323,443,279,456,432,317,377,413,395,391,397,295,486,366,435,489,372,345,459,475,382,442,434,493,554,489,522,286,443,416,317,517,404,391,462,358,479,466,394,390,559,366,291,370,469,380,329,377,362,408,374,383,410,0,0]},{&quot;name&quot;:&quot;ELETTORI MASCHI&quot;,&quot;data&quot;:[372,352,238,322,403,293,477,464,368,388,377,221,476,416,441,344,444,307,273,387,260,246,337,302,268,296,313,428,340,422,354,336,318,289,442,301,305,393,481,279,298,317,326,345,398,330,411,239,326,414,316,289,256,336,308,342,336,336,379,416,414,428,303,278,272,300,407,453,340,409,431,428,363,402,454,373,458,265,260,366,407,288,404,443,436,324,267,499,282,483,339,346,410,506,505,370,470,274,336,396,411,349,461,428,303,360,262,222,300,305,405,378,327,462,319,436,384,372,250,326,264,318,344,361,305,391,267,472,396,277,363,348,408,360,401,259,432,342,388,463,341,293,430,446,345,416,414,472,524,462,508,236,410,376,300,475,342,361,408,340,428,432,334,373,488,297,266,333,413,364,308,355,354,380,354,378,364,0,0]},{&quot;name&quot;:&quot;CIRCOSCRIZIONE&quot;,&quot;data&quot;:[&quot;Centro&quot;,&quot;Centro&quot;,&quot;Nord&quot;,&quot;Centro&quot;,&quot;Sud&quot;,&quot;Centro&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Centro&quot;,&quot;Nord&quot;,&quot;Sud&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Sud&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Centro&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Nord&quot;,&quot;Est&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Centro&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Sud&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Ovest&quot;,&quot;Est&quot;,&quot;Ovest&quot;,&quot;Est&quot;,&quot;Ovest&quot;,&quot;Est&quot;,&quot;Nord&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Est&quot;,&quot;Ovest&quot;,&quot;Nord&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Nord&quot;,&quot;Ovest&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Ovest&quot;,&quot;Ovest&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Centro&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Sud&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Nord&quot;,&quot;Est&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Est&quot;,&quot;Est&quot;,&quot;Nord&quot;,&quot;Est&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Nord&quot;,&quot;Est&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Centro&quot;,&quot;Centro&quot;]}]"></areachart-datalet>
            {/literal}
        </div>
        <div id="div3">
            {literal}
            <leafletjs-datalet data-url="http://ckan.routetopa.eu/api/3/action/datastore_search?resource_id=5689b249-e5f2-47dc-a50a-fe18a8d0f88e&amp;limit=99999" selectedfields="[{&quot;field&quot;:&quot;Latitude&quot;,&quot;value&quot;:&quot;COORDINATELAT&quot;,&quot;index&quot;:1},{&quot;field&quot;:&quot;Longitude&quot;,&quot;value&quot;:&quot;COORDINATELON&quot;,&quot;index&quot;:2},null]" filters="[]" aggregators="[]" orders="[]" data="[{&quot;name&quot;:&quot;COORDINATELAT&quot;,&quot;data&quot;:[43.880086,43.880251,43.880234,43.880371,43.880086,43.880391,43.880171,43.880151,43.880341,43.879715,43.88145,43.809896,43.93652,43.906236,43.864433,43.863335,43.893004,43.866909,43.792783,43.877131,44.032947,43.855204,43.814034,43.835336,43.894415,43.898043,43.844554,43.922995,43.896599,43.894533,43.879487,43.863123,43.873386,43.883158,43.813502,44.090993,43.883242,43.884609,43.873653,43.873653,43.873653,43.873653,43.873653,43.964923,43.878224,43.880337,43.878221,43.875144,43.880437,43.814146,43.927279,43.927278,43.966222,43.860277,43.78314,43.880537,43.927277,43.829584,44.028232,43.968758,43.815927,44.028232,44.001928,43.962411,43.78314,43.878113,43.814136,44.053564,43.866667,44.09075,44.021648,43.815827,43.864774,43.864775,43.864776,43.814078,43.880027,43.854121,43.880086,43.88568,43.898534,43.898534,43.898534,43.898534,43.898534,43.898534,43.898534,43.877976,43.877976,43.877976,43.93021,43.827881,43.908595,44.052467,43.828143,43.880086,44.05519,44.0528,44.0099,43.86816,43.87975,43.88606,43.85068,43.88237,43.96277,43.96277,43.87169,43.87169,43.8847,43.879082,43.884012,43.877773,43.909596,43.90895,43.908467,43.881248,43.880174,43.879502,43.881712,43.882243,43.843942,43.846118,43.878441,43.87712,43.879816,43.893056,43.883097,43.879744,43.876835,43.880572,43.880856,43.890676]},{&quot;name&quot;:&quot;COORDINATELON&quot;,&quot;data&quot;:[11.096916,11.096705,11.097688,11.09688,11.096916,11.097017,11.096706,11.096706,11.096017,11.096393,11.096145,10.98318,11.127805,11.115684,11.113173,11.134838,11.098457,11.128387,11.056539,11.057377,11.143069,11.080011,11.05556,11.105558,11.067582,11.055096,11.086203,11.092431,11.059592,11.08241,11.09423,11.117981,11.090505,11.097915,10.996858,11.158655,11.097063,11.054455,11.065779,11.065778,11.065778,11.065778,11.065778,11.105837,11.054875,11.099176,11.089599,11.087437,11.099276,11.058061,11.03695,11.036949,11.125643,11.106114,11.036907,11.099376,11.036948,11.021076,11.10717,11.12389,11.057898,11.10717,11.139504,11.128315,11.036907,11.101453,11.018251,11.156005,11.111308,11.154389,11.077393,11.057798,11.108398,11.108397,11.108396,11.019303,11.095203,11.060022,11.096916,11.05345,11.075656,11.075656,11.075656,11.075656,11.075656,11.075656,11.075656,11.061297,11.061297,11.061297,11.031386,11.038032,11.028984,11.15579,11.016131,11.096916,11.17915,11.1634,11.1769,11.10081,11.09621,11.0982,11.1107,11.0672,11.12774,11.12774,11.0726,11.0726,11.098517,11.098011,11.095986,11.101721,11.088207,11.087344,11.086263,11.100814,11.101807,11.1027,11.094288,11.097399,11.060312,11.061942,11.098942,11.089866,11.093174,11.090522,11.105238,11.099377,11.09859,11.096517,11.09673,11.064336]}]"></leafletjs-datalet>
            {/literal}
        </div>
        <div id="div4">
            {literal}
            <piechart-datalet data-url="http://ckan.routetopa.eu/api/3/action/datastore_search?resource_id=460e4248-f3cb-4904-9ee4-dd8db458c9c9&amp;limit=99999" selectedfields="[{&quot;field&quot;:&quot;SliceLabels&quot;,&quot;value&quot;:&quot;CIRCOSCRIZIONE&quot;,&quot;index&quot;:1},{&quot;field&quot;:&quot;SliceSizes&quot;,&quot;value&quot;:&quot;SUM(ELETTORI FEMMINE)&quot;,&quot;index&quot;:1}]" filters="[]" aggregators="[{&quot;field&quot;:&quot;CIRCOSCRIZIONE&quot;,&quot;operation&quot;:&quot;GROUP BY&quot;},{&quot;field&quot;:&quot;ELETTORI FEMMINE&quot;,&quot;operation&quot;:&quot;SUM&quot;}]" orders="[]" suffix="" legend="topRight" data-labels="true" donut="false" theme="themeBase" data="[{&quot;name&quot;:&quot;CIRCOSCRIZIONE&quot;,&quot;data&quot;:[&quot;Centro&quot;,&quot;Nord&quot;,&quot;Sud&quot;,&quot;Ovest&quot;,&quot;Est&quot;]},{&quot;name&quot;:&quot;SUM(ELETTORI FEMMINE)&quot;,&quot;data&quot;:[11934,15022,16628,14015,13099]}]"></piechart-datalet>
            {/literal}
        </div>
    </div>

</div>